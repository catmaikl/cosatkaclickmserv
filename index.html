<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ö–æ—Å–∞—Ç–∫–∞ –ö–ª–∏–∫: –ö–æ—Å–º–∏—á–µ—Å–∫–æ–µ –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Comic Sans MS", cursive, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #0a0e2a, #1a1f4b, #2d2366);
        color: #fff;
        min-height: 100vh;
        overflow-x: hidden;
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="10" cy="10" r="1" fill="white" opacity="0.7"/><circle cx="50" cy="20" r="1" fill="white" opacity="0.5"/><circle cx="80" cy="40" r="1" fill="white" opacity="0.8"/><circle cx="30" cy="70" r="1" fill="white" opacity="0.6"/><circle cx="70" cy="80" r="1" fill="white" opacity="0.9"/></svg>');
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
      }

      header {
        text-align: center;
        padding: 20px 0;
        border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        margin-bottom: 30px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
      }

      h1 {
        font-size: 2.8rem;
        margin-bottom: 10px;
        background: linear-gradient(90deg, #ff9a9e, #fad0c4, #fad0c4, #a1c4fd);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 0 10px rgba(255, 154, 158, 0.5);
      }

      .subtitle {
        font-size: 1.2rem;
        color: #a1c4fd;
        margin-bottom: 15px;
      }

      .game-area {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
      }

      .main-game {
        flex: 1;
        min-width: 300px;
        background: rgba(10, 14, 42, 0.7);
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        border: 2px solid #4a3f7d;
      }

      .player-info {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        background: rgba(0, 0, 0, 0.3);
        padding: 15px;
        border-radius: 10px;
        border: 1px solid #4a3f7d;
      }

      .resource {
        text-align: center;
        flex: 1;
      }

      .resource-label {
        font-size: 0.9rem;
        color: #a1c4fd;
        margin-bottom: 5px;
      }

      .resource-value {
        font-size: 1.8rem;
        font-weight: bold;
        color: #ff9a9e;
        text-shadow: 0 0 5px rgba(255, 154, 158, 0.7);
      }

      .kosatka-area {
        position: relative;
        height: 300px;
        background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%230d0f2a"/><circle cx="20" cy="20" r="3" fill="%233a3d6b"/><circle cx="60" cy="40" r="5" fill="%233a3d6b"/><circle cx="80" cy="70" r="4" fill="%233a3d6b"/><circle cx="40" cy="80" r="6" fill="%233a3d6b"/></svg>');
        border-radius: 10px;
        margin-bottom: 20px;
        overflow: hidden;
        cursor: pointer;
        border: 2px solid #4a3f7d;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .kosatka-img {
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        background-repeat: no-repeat;
        transition: transform 0.2s;
      }

      .kosatka-img img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        max-width: 200px;
        max-height: 200px;
      }

      .kosatka-area:active .kosatka-img {
        transform: scale(0.95);
      }

      .kosatka-click {
        position: absolute;
        width: 30px;
        height: 30px;
        background: radial-gradient(
          circle,
          rgba(255, 215, 0, 0.8) 0%,
          rgba(255, 140, 0, 0) 70%
        );
        border-radius: 50%;
        pointer-events: none;
        animation: clickEffect 0.5s forwards;
      }

      @keyframes clickEffect {
        0% {
          transform: scale(0.5);
          opacity: 1;
        }
        100% {
          transform: scale(2);
          opacity: 0;
        }
      }

      .fish-particle {
        position: absolute;
        width: 20px;
        height: 10px;
        background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 10"><path d="M0,5 Q10,0 20,5 Q10,10 0,5" fill="%23ff9a9e"/></svg>');
        background-size: contain;
        pointer-events: none;
        animation: fishFloat 3s linear forwards;
      }

      @keyframes fishFloat {
        0% {
          transform: translateY(0) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(-100px) rotate(360deg);
          opacity: 0;
        }
      }

      .upgrades {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 10px;
        margin-bottom: 20px;
      }

      .upgrade {
        background: rgba(0, 0, 0, 0.3);
        padding: 15px;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s;
        border: 1px solid #4a3f7d;
        position: relative;
        overflow: hidden;
      }

      .upgrade:hover {
        background: rgba(74, 63, 125, 0.3);
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .upgrade.disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .upgrade.disabled:hover {
        transform: none;
        background: rgba(0, 0, 0, 0.3);
      }

      .upgrade-title {
        font-weight: bold;
        margin-bottom: 5px;
        color: #fad0c4;
      }

      .upgrade-description {
        font-size: 0.8rem;
        margin-bottom: 10px;
        color: #a1c4fd;
      }

      .upgrade-cost {
        color: #ff9a9e;
        font-size: 0.9rem;
        display: flex;
        align-items: center;
      }

      .upgrade-cost::before {
        content: "üêü";
        margin-right: 5px;
      }

      .upgrade-owned {
        color: #a1c4fd;
        font-size: 0.8rem;
      }

      .online-players {
        flex: 0 0 300px;
        background: rgba(10, 14, 42, 0.7);
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        max-height: 500px;
        overflow-y: auto;
        border: 2px solid #4a3f7d;
      }

      .online-title {
        text-align: center;
        margin-bottom: 15px;
        color: #fad0c4;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .online-title::before {
        content: "üë•";
        margin-right: 10px;
      }

      .players-list {
        list-style: none;
      }

      .player-item {
        display: flex;
        justify-content: space-between;
        padding: 10px;
        margin-bottom: 10px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 8px;
        border-left: 3px solid #a1c4fd;
        transition: all 0.3s;
        cursor: pointer;
      }

      .player-item:hover {
        background: rgba(74, 63, 125, 0.3);
      }

      .player-item.me {
        border-left: 3px solid #ff9a9e;
        background: rgba(255, 154, 158, 0.1);
      }

      .player-name {
        font-weight: bold;
        display: flex;
        align-items: center;
      }

      .player-name::before {
        content: "üê±";
        margin-right: 5px;
      }

      .player-resources {
        color: #ff9a9e;
        display: flex;
        align-items: center;
      }

      .player-resources::before {
        content: "üêü";
        margin-right: 5px;
      }

      .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 20px;
        background: rgba(161, 196, 253, 0.9);
        color: #0a0e2a;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        transform: translateX(150%);
        transition: transform 0.3s;
        z-index: 1000;
        font-weight: bold;
        border-left: 4px solid #ff9a9e;
      }

      .notification.show {
        transform: translateX(0);
      }

      .boost-indicator {
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(255, 50, 50, 0.8);
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.8rem;
        animation: pulse 1s infinite;
        display: flex;
        align-items: center;
      }

      .boost-indicator::before {
        content: "‚ö°";
        margin-right: 5px;
      }

      @keyframes pulse {
        0% {
          opacity: 0.7;
        }
        50% {
          opacity: 1;
        }
        100% {
          opacity: 0.7;
        }
      }

      .connection-status {
        position: fixed;
        top: 10px;
        left: 10px;
        padding: 5px 10px;
        border-radius: 15px;
        font-size: 0.8rem;
        z-index: 1000;
        display: flex;
        align-items: center;
      }

      .connection-status::before {
        content: "üåê";
        margin-right: 5px;
      }

      .connected {
        background: rgba(0, 200, 0, 0.8);
      }

      .disconnected {
        background: rgba(200, 0, 0, 0.8);
      }

      .cat-fact {
        background: rgba(161, 196, 253, 0.2);
        padding: 10px;
        border-radius: 8px;
        margin-top: 15px;
        font-size: 0.8rem;
        border-left: 3px solid #ff9a9e;
      }

      /* –°—Ç–∏–ª–∏ –¥–ª—è —á–∞—Ç–∞ */
      .chat-container {
        flex: 0 0 300px;
        background: rgba(10, 14, 42, 0.7);
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        max-height: 500px;
        display: flex;
        flex-direction: column;
        border: 2px solid #4a3f7d;
      }

      .chat-title {
        text-align: center;
        margin-bottom: 15px;
        color: #fad0c4;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .chat-title::before {
        content: "üí¨";
        margin-right: 10px;
      }

      .chat-messages {
        flex: 1;
        overflow-y: auto;
        margin-bottom: 15px;
        padding: 10px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 8px;
        max-height: 300px;
      }

      .message {
        margin-bottom: 10px;
        padding: 8px;
        border-radius: 5px;
        background: rgba(74, 63, 125, 0.3);
        word-wrap: break-word;
      }

      .message.system {
        background: rgba(255, 154, 158, 0.2);
        font-style: italic;
        text-align: center;
      }

      .message.own {
        background: rgba(161, 196, 253, 0.3);
      }

      .message-sender {
        font-weight: bold;
        color: #fad0c4;
      }

      .chat-input-container {
        display: flex;
        gap: 10px;
      }

      .chat-input {
        flex: 1;
        padding: 10px;
        border-radius: 5px;
        border: 1px solid #4a3f7d;
        background: rgba(0, 0, 0, 0.3);
        color: white;
      }

      .chat-send {
        padding: 10px 15px;
        border-radius: 5px;
        border: none;
        background: #4a3f7d;
        color: white;
        cursor: pointer;
        transition: background 0.3s;
      }

      .chat-send:hover {
        background: #5a4f8d;
      }

      /* –°—Ç–∏–ª–∏ –¥–ª—è –±–∞—Ç—Ç–ª–æ–≤ */
      .battle-container {
        background: rgba(10, 14, 42, 0.7);
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        margin-top: 20px;
        border: 2px solid #4a3f7d;
      }

      .battle-title {
        text-align: center;
        margin-bottom: 15px;
        color: #fad0c4;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .battle-title::before {
        content: "‚öîÔ∏è";
        margin-right: 10px;
      }

      .battle-actions {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
      }

      .battle-btn {
        flex: 1;
        padding: 10px;
        border-radius: 5px;
        border: none;
        background: #4a3f7d;
        color: white;
        cursor: pointer;
        transition: background 0.3s;
        text-align: center;
      }

      .battle-btn:hover {
        background: #5a4f8d;
      }

      .battle-btn:disabled {
        background: #3a3f5d;
        cursor: not-allowed;
      }

      .battle-log {
        max-height: 200px;
        overflow-y: auto;
        padding: 10px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 8px;
        font-size: 0.9rem;
      }

      .battle-event {
        margin-bottom: 5px;
        padding: 5px;
        border-radius: 3px;
        background: rgba(74, 63, 125, 0.3);
      }

      .battle-event.attack {
        background: rgba(255, 100, 100, 0.3);
      }

      .battle-event.defense {
        background: rgba(100, 100, 255, 0.3);
      }

      .battle-event.special {
        background: rgba(255, 200, 100, 0.3);
      }

      .battle-stats {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
      }

      .battle-stat {
        text-align: center;
        flex: 1;
      }

      .battle-health {
        height: 10px;
        background: #333;
        border-radius: 5px;
        margin-top: 5px;
        overflow: hidden;
      }

      .battle-health-fill {
        height: 100%;
        background: linear-gradient(90deg, #ff5e5e, #ff9a9e);
        border-radius: 5px;
        transition: width 0.3s;
      }

      @media (max-width: 768px) {
        .game-area {
          flex-direction: column;
        }

        .online-players,
        .chat-container {
          flex: 1;
          width: 100%;
        }

        h1 {
          font-size: 2rem;
        }

        .player-info {
          flex-direction: column;
          gap: 10px;
        }

        .battle-actions {
          flex-direction: column;
        }
      }
    </style>
  </head>
  <body>
    <div class="connection-status disconnected" id="connectionStatus">
      –û—Ç–∫–ª—é—á–µ–Ω
    </div>
    text
    <div class="container">
      <header>
        <h1>–ö–æ—Å–∞—Ç–∫–∞ –ö–ª–∏–∫: –ö–æ—Å–º–∏—á–µ—Å–∫–æ–µ –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ</h1>
        <p class="subtitle">
          –ü–æ–º–æ–≥–∏ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π –∫–æ—à–∫–µ –ö–æ—Å–∞—Ç–∫–µ —Å–æ–±—Ä–∞—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ —Ä—ã–±–æ–∫!
        </p>
      </header>

      <div class="game-area">
        <div class="main-game">
          <div class="player-info">
            <div class="resource">
              <div class="resource-label">–†—ã–±–∫–∏</div>
              <div class="resource-value" id="resources">0</div>
            </div>
            <div class="resource">
              <div class="resource-label">–†—ã–±–æ–∫/–∫–ª–∏–∫</div>
              <div class="resource-value" id="click-power">1</div>
            </div>
            <div class="resource">
              <div class="resource-label">–†—ã–±–æ–∫/—Å–µ–∫</div>
              <div class="resource-value" id="auto-power">0</div>
            </div>
          </div>

          <div class="kosatka-area" id="kosatka">
            <div class="kosatka-img">
              <img src="cat.png" alt="" />
            </div>
            <div
              class="boost-indicator"
              id="boost-indicator"
              style="display: none"
            >
              –ë–£–°–¢ x2!
            </div>
          </div>

          <h2 style="color: #fad0c4; margin-bottom: 10px">
            –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –ö–æ—Å–∞—Ç–∫–∏
          </h2>
          <div class="upgrades" id="upgrades">
            <!-- –£–ª—É—á—à–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
          </div>

          <div class="battle-container">
            <h2 class="battle-title">–ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ –ë–∞—Ç–∞–ª–∏–∏</h2>
            <div class="battle-stats">
              <div class="battle-stat">
                <div>–í–∞—à–µ –∑–¥–æ—Ä–æ–≤—å–µ</div>
                <div id="player-health">100/100</div>
                <div class="battle-health">
                  <div
                    class="battle-health-fill"
                    id="player-health-bar"
                    style="width: 100%"
                  ></div>
                </div>
              </div>
              <div class="battle-stat">
                <div>–ü—Ä–æ—Ç–∏–≤–Ω–∏–∫</div>
                <div id="opponent-health">100/100</div>
                <div class="battle-health">
                  <div
                    class="battle-health-fill"
                    id="opponent-health-bar"
                    style="width: 100%"
                  ></div>
                </div>
              </div>
            </div>
            <div class="battle-actions" id="battle-actions">
              <button class="battle-btn" id="attack-btn">
                –ê—Ç–∞–∫–∞ (10 —Ä—ã–±–æ–∫)
              </button>
              <button class="battle-btn" id="special-btn">
                –°—É–ø–µ—Ä-—É–¥–∞—Ä (25 —Ä—ã–±–æ–∫)
              </button>
              <button class="battle-btn" id="challenge-btn">
                –í—ã–∑–≤–∞—Ç—å –Ω–∞ –±–æ–π
              </button>
            </div>
            <div class="battle-log" id="battle-log">
              <div class="battle-event system">
                –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –∏ –Ω–∞—á–Ω–∏—Ç–µ –±–∏—Ç–≤—É!
              </div>
            </div>
          </div>

          <div class="cat-fact">
            <strong>–§–∞–∫—Ç –æ –∫–æ—à–∫–∞—Ö:</strong> –ö–æ—à–∫–∞ –ö–æ—Å–∞—Ç–∫–∞ –ø–æ–ª—É—á–∏–ª–∞ —Å–≤–æ—ë –∏–º—è –∑–∞
            –ª—é–±–æ–≤—å –∫ —Ä—ã–±–∫–µ –∏ –∫–æ—Å–º–∏—á–µ—Å–∫–∏–º –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è–º!
          </div>
        </div>

        <div class="online-players">
          <h2 class="online-title">–ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ –∫–æ—Ç—ã –æ–Ω–ª–∞–π–Ω</h2>
          <ul class="players-list" id="players-list">
            <li class="player-item">
              <span class="player-name">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
              <span class="player-resources">0</span>
            </li>
          </ul>

          <div class="cat-fact">
            <strong>–°–æ–≤–µ—Ç:</strong> –û–±—â–∞–π—Ç–µ—Å—å —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ—Å–º–∏—á–µ—Å–∫–∏–º–∏ –∫–æ—Ç–∞–º–∏ –∏
            —Å–æ—Ä–µ–≤–Ω—É–π—Ç–µ—Å—å –∑–∞ –∑–≤–∞–Ω–∏–µ –ª—É—á—à–µ–≥–æ —Ä—ã–±–æ–ª–æ–≤–∞!
          </div>
        </div>

        <div class="chat-container">
          <h2 class="chat-title">–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –ß–∞—Ç</h2>
          <div class="chat-messages" id="chat-messages">
            <div class="message system">
              –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π —á–∞—Ç!
            </div>
          </div>
          <div class="chat-input-container">
            <input
              type="text"
              class="chat-input"
              id="chat-input"
              placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
              maxlength="200"
            />
            <button class="chat-send" id="chat-send">–û—Ç–ø—Ä.</button>
          </div>
        </div>
      </div>
    </div>

    <div class="notification" id="notification">
      –ù–æ–≤—ã–π –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è –∫ –∏–≥—Ä–µ!
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
      // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
      let resources = 0;
      let clickPower = 1;
      let autoPower = 0;
      let boostActive = false;
      let boostTimeLeft = 0;
      let playerName = "–ö–æ—Ç_" + Math.floor(Math.random() * 1000);
      let socket = null;
      let selectedOpponent = null;
      let inBattle = false;
      let battleLog = [];
      let playerHealth = 100;
      let opponentHealth = 100;

      // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
      const resourcesEl = document.getElementById("resources");
      const clickPowerEl = document.getElementById("click-power");
      const autoPowerEl = document.getElementById("auto-power");
      const kosatkaEl = document.getElementById("kosatka");
      const upgradesEl = document.getElementById("upgrades");
      const playersListEl = document.getElementById("players-list");
      const notificationEl = document.getElementById("notification");
      const boostIndicatorEl = document.getElementById("boost-indicator");
      const connectionStatusEl = document.getElementById("connectionStatus");
      const chatMessagesEl = document.getElementById("chat-messages");
      const chatInputEl = document.getElementById("chat-input");
      const chatSendEl = document.getElementById("chat-send");
      const battleActionsEl = document.getElementById("battle-actions");
      const battleLogEl = document.getElementById("battle-log");
      const attackBtnEl = document.getElementById("attack-btn");
      const specialBtnEl = document.getElementById("special-btn");
      const challengeBtnEl = document.getElementById("challenge-btn");
      const playerHealthEl = document.getElementById("player-health");
      const opponentHealthEl = document.getElementById("opponent-health");
      const playerHealthBarEl = document.getElementById("player-health-bar");
      const opponentHealthBarEl = document.getElementById(
        "opponent-health-bar"
      );

      // –£–ª—É—á—à–µ–Ω–∏—è —Å –∫–æ—à–∞—á—å–µ–π —Ç–µ–º–∞—Ç–∏–∫–æ–π
      const upgrades = [
        {
          id: 1,
          name: "–£–ª—É—á—à–µ–Ω–Ω—ã–µ –∫–æ–≥—Ç–∏",
          description: "–ö–æ—Å–∞—Ç–∫–∞ –ª–æ–≤–∏—Ç –±–æ–ª—å—à–µ —Ä—ã–±–æ–∫ –∑–∞ –æ–¥–∏–Ω –∫–ª–∏–∫",
          cost: 10,
          power: 1,
          type: "click",
          owned: 0,
        },
        {
          id: 2,
          name: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä—ã–±–∞–ª–∫–∞",
          description: "–ö–æ—Å–∞—Ç–∫–∞ –ª–æ–≤–∏—Ç —Ä—ã–±–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏",
          cost: 50,
          power: 1,
          type: "auto",
          owned: 0,
        },
        {
          id: 3,
          name: "–ö–æ—à–∞—á–∏–π –∞–∑–∞—Ä—Ç",
          description: "–í—Ä–µ–º–µ–Ω–Ω–æ —É–¥–≤–∞–∏–≤–∞–µ—Ç —É–ª–æ–≤ —Ä—ã–±–æ–∫",
          cost: 100,
          power: 0,
          type: "boost",
          owned: 0,
        },
        {
          id: 4,
          name: "–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π —É–¥–æ—á–Ω–∏–∫",
          description: "–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —É–ª–æ–≤",
          cost: 500,
          power: 5,
          type: "auto",
          owned: 0,
        },
        {
          id: 5,
          name: "–†—ã–±–Ω—ã–π –º–∞–≥–Ω–∏—Ç",
          description: "–ü—Ä–∏–º–∞–Ω–∏–≤–∞–µ—Ç –≤ 5 —Ä–∞–∑ –±–æ–ª—å—à–µ —Ä—ã–±–æ–∫",
          cost: 1000,
          power: 5,
          type: "click",
          owned: 0,
        },
        {
          id: 6,
          name: "–ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –±—É—Å—Ç–µ—Ä",
          description: "–£–¥–≤–∞–∏–≤–∞–µ—Ç —É–ª–æ–≤ –Ω–∞ 30 —Å–µ–∫—É–Ω–¥",
          cost: 2000,
          power: 0,
          type: "boost",
          owned: 0,
        },
        {
          id: 7,
          name: "–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å",
          description: "–ö–æ—Å–∞—Ç–∫–∞ –º–æ–∂–µ—Ç –ª–æ–≤–∏—Ç—å —Ä—ã–±–æ–∫ –≤ –¥–∞–ª—å–Ω–∏—Ö –≥–∞–ª–∞–∫—Ç–∏–∫–∞—Ö",
          cost: 5000,
          power: 10,
          type: "auto",
          owned: 0,
        },
        {
          id: 8,
          name: "–†—ã–±–Ω—ã–π –¥–µ—Ç–µ–∫—Ç–æ—Ä",
          description: "–ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å —Ä–µ–¥–∫–∏–µ —Ä—ã–±–∫–∏",
          cost: 10000,
          power: 20,
          type: "click",
          owned: 0,
        },
      ];

      // –°–ª—É—á–∞–π–Ω—ã–µ –∫–æ—à–∞—á—å–∏ —Ñ–∞–∫—Ç—ã
      const catFacts = [
        "–ö–æ—à–∫–∏ —Å–ø—è—Ç –æ–∫–æ–ª–æ 16 —á–∞—Å–æ–≤ –≤ –¥–µ–Ω—å!",
        "–£ –∫–æ—à–µ–∫ –±–æ–ª–µ–µ 20 –º—ã—à—Ü —É–ø—Ä–∞–≤–ª—è—é—Ç —É—à–∞–º–∏.",
        "–ö–æ—à–∫–∞ –ö–æ—Å–∞—Ç–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∞ —Ä–µ–∫–æ—Ä–¥ –ø–æ –ª–æ–≤–ª–µ –∫–æ—Å–º–∏—á–µ—Å–∫–∏—Ö —Ä—ã–±–æ–∫!",
        "–ö–æ—à–∫–∏ –º–æ–≥—É—Ç –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å —É—à–∏ –Ω–∞ 180 –≥—Ä–∞–¥—É—Å–æ–≤.",
        "–ö–æ—Å–∞—Ç–∫–∞ –º–æ–∂–µ—Ç –ª–æ–≤–∏—Ç—å —Ä—ã–±–æ–∫ –¥–∞–∂–µ –≤ –Ω–µ–≤–µ—Å–æ–º–æ—Å—Ç–∏!",
        "–£—Å—ã –∫–æ—à–∫–∞–º –ø–æ–º–æ–≥–∞—é—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –æ–±—ä–µ–∫—Ç–æ–≤.",
        "–ö–æ—Å–∞—Ç–∫–∞ - –ø–µ—Ä–≤–∞—è –∫–æ—à–∫–∞, –ø–æ–π–º–∞–≤—à–∞—è —Ä—ã–±–∫—É –Ω–∞ –õ—É–Ω–µ!",
      ];

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
      function initGame() {
        // –ó–∞–ø—Ä–æ—Å –∏–º–µ–Ω–∏ –∏–≥—Ä–æ–∫–∞
        playerName =
          prompt("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –≤–∞—à–µ–≥–æ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ –∫–æ—Ç–∞:", playerName) ||
          playerName;

        // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
        connectToServer();

        // –°–æ–∑–¥–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏–π
        renderUpgrades();

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –ö–æ—Å–∞—Ç–∫–µ
        kosatkaEl.addEventListener("click", kosatkaClick);

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —á–∞—Ç–∞
        chatSendEl.addEventListener("click", sendChatMessage);
        chatInputEl.addEventListener("keypress", (e) => {
          if (e.key === "Enter") sendChatMessage();
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –±–∞—Ç—Ç–ª–æ–≤
        attackBtnEl.addEventListener("click", performAttack);
        specialBtnEl.addEventListener("click", performSpecialAttack);
        challengeBtnEl.addEventListener("click", challengeOpponent);

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–±—ã—á–∞ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
        setInterval(autoFish, 1000);

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±—É—Å—Ç–µ—Ä–∞ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
        setInterval(updateBoost, 1000);

        // –°–º–µ–Ω–∞ —Ñ–∞–∫—Ç–æ–≤ –æ –∫–æ—à–∫–∞—Ö –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
        setInterval(changeCatFact, 10000);

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        updateUI();
      }

      // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
      function connectToServer() {
        try {
          socket = io();

          socket.on("connect", () => {
            console.log("–ü–æ–¥–∫–ª—é—á–µ–Ω –∫ —Å–µ—Ä–≤–µ—Ä—É");
            connectionStatusEl.textContent = "–ü–æ–¥–∫–ª—é—á–µ–Ω";
            connectionStatusEl.className = "connection-status connected";

            // –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ–±–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
            socket.emit("player-join", {
              name: playerName,
              resources: resources,
              clickPower: clickPower,
              autoPower: autoPower,
            });
          });

          socket.on("disconnect", () => {
            console.log("–û—Ç–∫–ª—é—á–µ–Ω –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞");
            connectionStatusEl.textContent = "–û—Ç–∫–ª—é—á–µ–Ω";
            connectionStatusEl.className = "connection-status disconnected";
          });

          // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π WebSocket

          // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–≥—Ä–æ–∫–æ–≤
          socket.on("players-list", (players) => {
            updatePlayersList(players);
          });

          // –ù–æ–≤—ã–π –∏–≥—Ä–æ–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è
          socket.on("player-joined", (player) => {
            if (player.name !== playerName) {
              showNotification(
                `${player.name} –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è –∫ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π —Ä—ã–±–∞–ª–∫–µ!`
              );
            }
          });

          // –ò–≥—Ä–æ–∫ –≤—ã—à–µ–ª –∏–∑ –∏–≥—Ä—ã
          socket.on("player-left", (player) => {
            showNotification(`${player.name} —É–ø–ª—ã–ª –≤ –¥—Ä—É–≥—É—é –≥–∞–ª–∞–∫—Ç–∏–∫—É.`);
          });

          // –ò–≥—Ä–æ–∫ –¥–æ–±—ã–ª —Ä–µ—Å—É—Ä—Å—ã
          socket.on("player-mined", (data) => {
            console.log(`${data.name} –ø–æ–π–º–∞–ª ${data.mined} —Ä—ã–±–æ–∫`);
          });

          // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞
          socket.on("chat-message", (data) => {
            addChatMessage(
              data.sender,
              data.message,
              data.sender === playerName
            );
          });

          // –í—ã–∑–æ–≤ –Ω–∞ –±–æ–π
          socket.on("battle-challenge", (data) => {
            if (
              confirm(`${data.challenger} –≤—ã–∑—ã–≤–∞–µ—Ç –≤–∞—Å –Ω–∞ –±–æ–π! –ü—Ä–∏–Ω—è—Ç—å –≤—ã–∑–æ–≤?`)
            ) {
              socket.emit("battle-accept", {
                challenger: data.challenger,
                defender: playerName,
              });
              startBattle(data.challenger);
            } else {
              socket.emit("battle-decline", {
                challenger: data.challenger,
                defender: playerName,
              });
            }
          });

          // –ë–æ–π –ø—Ä–∏–Ω—è—Ç
          socket.on("battle-accepted", (data) => {
            showNotification(`${data.defender} –ø—Ä–∏–Ω—è–ª –≤–∞—à –≤—ã–∑–æ–≤!`);
            startBattle(data.defender);
          });

          // –ë–æ–π –æ—Ç–∫–ª–æ–Ω–µ–Ω
          socket.on("battle-declined", (data) => {
            showNotification(`${data.defender} –æ—Ç–∫–ª–æ–Ω–∏–ª –≤–∞—à –≤—ã–∑–æ–≤.`);
          });

          // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∞—Ç–∞–∫–∏
          socket.on("battle-attack", (data) => {
            if (inBattle && data.attacker !== playerName) {
              receiveAttack(data.damage, data.isSpecial);
            }
          });

          // –ö–æ–Ω–µ—Ü –±–æ—è
          socket.on("battle-end", (data) => {
            endBattle(data.winner, data.loser);
          });
        } catch (error) {
          console.error("–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:", error);
          connectionStatusEl.textContent = "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è";
          connectionStatusEl.className = "connection-status disconnected";
        }
      }

      // –†–µ–Ω–¥–µ—Ä —É–ª—É—á—à–µ–Ω–∏–π
      function renderUpgrades() {
        upgradesEl.innerHTML = "";

        upgrades.forEach((upgrade) => {
          const upgradeEl = document.createElement("div");
          upgradeEl.className = "upgrade";
          if (resources < upgrade.cost) {
            upgradeEl.classList.add("disabled");
          }
          upgradeEl.innerHTML = `
                <div class="upgrade-title">${upgrade.name}</div>
                <div class="upgrade-description">${upgrade.description}</div>
                <div class="upgrade-cost">${upgrade.cost} —Ä—ã–±–æ–∫</div>
                <div class="upgrade-owned">–ö—É–ø–ª–µ–Ω–æ: ${upgrade.owned}</div>
            `;

          upgradeEl.addEventListener("click", () =>
            purchaseUpgrade(upgrade.id)
          );

          upgradesEl.appendChild(upgradeEl);
        });
      }

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–≥—Ä–æ–∫–æ–≤
      function updatePlayersList(players) {
        playersListEl.innerHTML = "";

        if (players.length === 0) {
          const emptyItem = document.createElement("li");
          emptyItem.className = "player-item";
          emptyItem.innerHTML =
            '<span class="player-name">–ù–µ—Ç –∫–æ—Ç–æ–≤ –æ–Ω–ª–∞–π–Ω</span>';
          playersListEl.appendChild(emptyItem);
          return;
        }

        // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Ä–µ—Å—É—Ä—Å–æ–≤
        players.sort((a, b) => b.resources - a.resources);

        players.forEach((player) => {
          const playerEl = document.createElement("li");
          playerEl.className = "player-item";
          if (player.name === playerName) {
            playerEl.classList.add("me");
          } else {
            playerEl.addEventListener("click", () => selectOpponent(player));
          }
          playerEl.innerHTML = `
                <span class="player-name">${player.name}</span>
                <span class="player-resources">${Math.floor(
                  player.resources
                )}</span>
            `;

          playersListEl.appendChild(playerEl);
        });
      }

      // –í—ã–±–æ—Ä –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞
      function selectOpponent(player) {
        selectedOpponent = player;
        challengeBtnEl.textContent = `–í—ã–∑–≤–∞—Ç—å ${player.name}`;
        challengeBtnEl.disabled = false;

        // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞
        document.querySelectorAll(".player-item").forEach((item) => {
          item.style.background = "";
        });

        event.currentTarget.style.background = "rgba(255, 154, 158, 0.2)";
      }

      // –í—ã–∑–æ–≤ –Ω–∞ –±–æ–π
      function challengeOpponent() {
        if (!selectedOpponent) {
          showNotification("–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ –∏–∑ —Å–ø–∏—Å–∫–∞!");
          return;
        }

        if (selectedOpponent.name === playerName) {
          showNotification("–ù–µ–ª—å–∑—è —Å—Ä–∞–∂–∞—Ç—å—Å—è —Å —Å–∞–º–∏–º —Å–æ–±–æ–π!");
          return;
        }

        if (resources < 10) {
          showNotification("–ù—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 10 —Ä—ã–±–æ–∫ –¥–ª—è –Ω–∞—á–∞–ª–∞ –±–æ—è!");
          return;
        }

        socket.emit("battle-challenge", {
          challenger: playerName,
          defender: selectedOpponent.name,
        });

        addBattleLog("system", `–í—ã –≤—ã–∑–≤–∞–ª–∏ ${selectedOpponent.name} –Ω–∞ –±–æ–π!`);
      }

      // –ù–∞—á–∞–ª–æ –±–æ—è
      function startBattle(opponent) {
        inBattle = true;
        selectedOpponent = { name: opponent };
        playerHealth = 100;
        opponentHealth = 100;
        battleLog = [];

        addBattleLog("system", `–ë–æ–π —Å ${opponent} –Ω–∞—á–∞–ª—Å—è!`);
        updateBattleUI();

        attackBtnEl.disabled = false;
        specialBtnEl.disabled = false;
        challengeBtnEl.disabled = true;
      }

      // –ê—Ç–∞–∫–∞
      function performAttack() {
        if (!inBattle || resources < 10) {
          showNotification("–ù—É–∂–Ω–æ 10 —Ä—ã–±–æ–∫ –¥–ª—è –∞—Ç–∞–∫–∏!");
          return;
        }

        resources -= 10;
        updateUI();

        const damage = Math.floor(Math.random() * 15) + 5; // 5-20 —É—Ä–æ–Ω–∞
        opponentHealth -= damage;

        if (opponentHealth < 0) opponentHealth = 0;

        addBattleLog("attack", `–í—ã –∞—Ç–∞–∫–æ–≤–∞–ª–∏ –∏ –Ω–∞–Ω–µ—Å–ª–∏ ${damage} —É—Ä–æ–Ω–∞!`);
        updateBattleUI();

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –∞—Ç–∞–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        socket.emit("battle-attack", {
          attacker: playerName,
          defender: selectedOpponent.name,
          damage: damage,
          isSpecial: false,
        });

        checkBattleEnd();
      }

      // –°—É–ø–µ—Ä-–∞—Ç–∞–∫–∞
      function performSpecialAttack() {
        if (!inBattle || resources < 25) {
          showNotification("–ù—É–∂–Ω–æ 25 —Ä—ã–±–æ–∫ –¥–ª—è —Å—É–ø–µ—Ä-–∞—Ç–∞–∫–∏!");
          return;
        }

        resources -= 25;
        updateUI();

        const damage = Math.floor(Math.random() * 25) + 15; // 15-40 —É—Ä–æ–Ω–∞
        opponentHealth -= damage;

        if (opponentHealth < 0) opponentHealth = 0;

        addBattleLog(
          "special",
          `–í—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Å—É–ø–µ—Ä-—É–¥–∞—Ä –∏ –Ω–∞–Ω–µ—Å–ª–∏ ${damage} —É—Ä–æ–Ω–∞!`
        );
        updateBattleUI();

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –∞—Ç–∞–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        socket.emit("battle-attack", {
          attacker: playerName,
          defender: selectedOpponent.name,
          damage: damage,
          isSpecial: true,
        });

        checkBattleEnd();
      }

      // –ü–æ–ª—É—á–µ–Ω–∏–µ –∞—Ç–∞–∫–∏
      function receiveAttack(damage, isSpecial) {
        playerHealth -= damage;

        if (playerHealth < 0) playerHealth = 0;

        const attackType = isSpecial ? "special" : "attack";
        addBattleLog(
          attackType,
          `${selectedOpponent.name} –∞—Ç–∞–∫–æ–≤–∞–ª –∏ –Ω–∞–Ω–µ—Å –≤–∞–º ${damage} —É—Ä–æ–Ω–∞!`
        );
        updateBattleUI();

        checkBattleEnd();
      }

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –±–æ—è
      function checkBattleEnd() {
        if (playerHealth <= 0) {
          endBattle(selectedOpponent.name, playerName);
          socket.emit("battle-end", {
            winner: selectedOpponent.name,
            loser: playerName,
          });
        } else if (opponentHealth <= 0) {
          endBattle(playerName, selectedOpponent.name);
          socket.emit("battle-end", {
            winner: playerName,
            loser: selectedOpponent.name,
          });
        }
      }

      // –ö–æ–Ω–µ—Ü –±–æ—è
      function endBattle(winner, loser) {
        inBattle = false;

        if (winner === playerName) {
          const reward = 50;
          resources += reward;
          addBattleLog("system", `–í—ã –ø–æ–±–µ–¥–∏–ª–∏ –∏ –ø–æ–ª—É—á–∏–ª–∏ ${reward} —Ä—ã–±–æ–∫!`);
          showNotification(`–í—ã –ø–æ–±–µ–¥–∏–ª–∏ ${loser} –∏ –ø–æ–ª—É—á–∏–ª–∏ ${reward} —Ä—ã–±–æ–∫!`);
        } else {
          addBattleLog("system", `–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ –±–æ–π. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!`);
          showNotification(`–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ –±–æ–π –ø—Ä–æ—Ç–∏–≤ ${winner}.`);
        }

        attackBtnEl.disabled = true;
        specialBtnEl.disabled = true;
        challengeBtnEl.disabled = false;

        updateUI();
      }

      // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–≥ –±–æ—è
      function addBattleLog(type, message) {
        battleLog.push({ type, message });

        if (battleLog.length > 10) {
          battleLog.shift();
        }

        battleLogEl.innerHTML = "";

        battleLog.forEach((event) => {
          const eventEl = document.createElement("div");
          eventEl.className = `battle-event ${event.type}`;
          eventEl.textContent = event.message;
          battleLogEl.appendChild(eventEl);
        });

        battleLogEl.scrollTop = battleLogEl.scrollHeight;
      }

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –±–æ—è
      function updateBattleUI() {
        playerHealthEl.textContent = `${playerHealth}/100`;
        opponentHealthEl.textContent = `${opponentHealth}/100`;

        playerHealthBarEl.style.width = `${playerHealth}%`;
        opponentHealthBarEl.style.width = `${opponentHealth}%`;
      }

      // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
      function sendChatMessage() {
        const message = chatInputEl.value.trim();

        if (message === "") return;

        // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è
        if (message.length > 200) {
          showNotification("–°–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ! –ú–∞–∫—Å–∏–º—É–º 200 —Å–∏–º–≤–æ–ª–æ–≤.");
          return;
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        socket.emit("chat-message", {
          sender: playerName,
          message: message,
        });

        // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª—è –≤–≤–æ–¥–∞
        chatInputEl.value = "";
      }

      // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
      function addChatMessage(sender, message, isOwn) {
        const messageEl = document.createElement("div");
        messageEl.className = `message ${isOwn ? "own" : ""}`;
        messageEl.innerHTML = `
            <span class="message-sender">${sender}:</span> ${message}
        `;

        chatMessagesEl.appendChild(messageEl);
        chatMessagesEl.scrollTop = chatMessagesEl.scrollHeight;
      }

      // –ö–ª–∏–∫ –ø–æ –ö–æ—Å–∞—Ç–∫–µ
      function kosatkaClick(e) {
        // –°–æ–∑–¥–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ –∫–ª–∏–∫–∞
        const clickEffect = document.createElement("div");
        clickEffect.className = "kosatka-click";
        clickEffect.style.left = e.pageX - kosatkaEl.offsetLeft - 15 + "px";
        clickEffect.style.top = e.pageY - kosatkaEl.offsetTop - 15 + "px";
        kosatkaEl.appendChild(clickEffect);

        // –£–¥–∞–ª–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
        setTimeout(() => {
          kosatkaEl.removeChild(clickEffect);
        }, 500);

        // –°–æ–∑–¥–∞–Ω–∏–µ —Ä—ã–±–∫–∏
        const fish = document.createElement("div");
        fish.className = "fish-particle";
        fish.style.left = e.pageX - kosatkaEl.offsetLeft - 10 + "px";
        fish.style.top = e.pageY - kosatkaEl.offsetTop - 5 + "px";
        kosatkaEl.appendChild(fish);

        // –£–¥–∞–ª–µ–Ω–∏–µ —Ä—ã–±–∫–∏ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
        setTimeout(() => {
          if (kosatkaEl.contains(fish)) {
            kosatkaEl.removeChild(fish);
          }
        }, 3000);

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
        let fishCaught = clickPower;
        if (boostActive) fishCaught *= 2;

        resources += fishCaught;

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        if (socket) {
          socket.emit("player-mine", {
            name: playerName,
            mined: fishCaught,
          });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        updateUI();
      }

      // –ü–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è
      function purchaseUpgrade(id) {
        const upgrade = upgrades.find((u) => u.id === id);

        if (!upgrade || resources < upgrade.cost) return;

        resources -= upgrade.cost;
        upgrade.owned++;

        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
        switch (upgrade.type) {
          case "click":
            clickPower += upgrade.power;
            break;
          case "auto":
            autoPower += upgrade.power;
            break;
          case "boost":
            activateBoost(upgrade.id === 6 ? 30 : 10); // 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è –≥–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –±—É—Å—Ç–µ—Ä–∞
            break;
        }

        // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —É–ª—É—á—à–µ–Ω–∏—è
        upgrade.cost = Math.floor(upgrade.cost * 1.5);

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        updateUI();
        renderUpgrades();

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        if (socket) {
          socket.emit("player-update", {
            name: playerName,
            resources: resources,
            clickPower: clickPower,
            autoPower: autoPower,
          });
        }
      }

      // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –±—É—Å—Ç–µ—Ä–∞
      function activateBoost(duration) {
        boostActive = true;
        boostTimeLeft = duration;
        boostIndicatorEl.style.display = "flex";

        showNotification(
          `–ë—É—Å—Ç–µ—Ä –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! –£–ª–æ–≤ —É–¥–≤–æ–µ–Ω –Ω–∞ ${duration} —Å–µ–∫—É–Ω–¥.`
        );
      }

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±—É—Å—Ç–µ—Ä–∞
      function updateBoost() {
        if (boostActive) {
          boostTimeLeft--;

          if (boostTimeLeft <= 0) {
            boostActive = false;
            boostIndicatorEl.style.display = "none";
            showNotification("–î–µ–π—Å—Ç–≤–∏–µ –±—É—Å—Ç–µ—Ä–∞ –∑–∞–∫–æ–Ω—á–∏–ª–æ—Å—å.");
          } else {
            boostIndicatorEl.textContent = `–ë–£–°–¢ x2! (${boostTimeLeft}—Å)`;
          }
        }
      }

      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–±—ã—á–∞
      function autoFish() {
        if (autoPower > 0) {
          let fishCaught = autoPower;
          if (boostActive) fishCaught *= 2;

          resources += fishCaught;

          // –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
          if (socket) {
            socket.emit("player-mine", {
              name: playerName,
              mined: fishCaught,
            });
          }

          updateUI();
        }
      }

      // –°–º–µ–Ω–∞ —Ñ–∞–∫—Ç–∞ –æ –∫–æ—à–∫–∞—Ö
      function changeCatFact() {
        const factEl = document.querySelector(".cat-fact");
        const randomFact =
          catFacts[Math.floor(Math.random() * catFacts.length)];
        factEl.innerHTML = `<strong>–§–∞–∫—Ç –æ –∫–æ—à–∫–∞—Ö:</strong> ${randomFact}`;
      }

      // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
      function showNotification(message) {
        notificationEl.textContent = message;
        notificationEl.classList.add("show");

        setTimeout(() => {
          notificationEl.classList.remove("show");
        }, 3000);
      }

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
      function updateUI() {
        resourcesEl.textContent = Math.floor(resources);
        clickPowerEl.textContent = clickPower * (boostActive ? 2 : 1);
        autoPowerEl.textContent = autoPower * (boostActive ? 2 : 1);

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –±–∞—Ç—Ç–ª–æ–≤
        attackBtnEl.disabled = !inBattle || resources < 10;
        specialBtnEl.disabled = !inBattle || resources < 25;
      }

      // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
      window.addEventListener("load", initGame);
    </script>
  </body>
</html>